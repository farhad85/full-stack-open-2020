(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{23:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),u=t.n(c),i=t(17),o=t.n(i),a=t(8),s=t(3),d=function(e){var n=e.person,t=e.onDelete;return Object(r.jsxs)("p",{children:[n.name," ",n.number," ",Object(r.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(n.name,"?"))&&t(n.id)},children:"delete"})]})},b=function(e){var n=e.search,t=e.persons,c=e.onDelete,u=t;return n&&(u=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))),u.map((function(e){return Object(r.jsx)(d,{person:e,onDelete:c},e.id)}))},j=function(e){var n=e.setSearch,t=e.search;return Object(r.jsxs)("div",{children:["filter shown with:"," ",Object(r.jsx)("input",{onChange:function(e){return n(e.target.value)},value:t})]})},l=function(e){var n=e.onSubmit,t=e.setNewName,c=e.newName,u=e.newNumber,i=e.setNewNumber;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name:",Object(r.jsx)("input",{onChange:function(e){return t(e.target.value)},value:c})]}),Object(r.jsxs)("div",{children:["number:",Object(r.jsx)("input",{onChange:function(e){return i(e.target.value)},value:u})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},f=(t(23),function(e){var n=e.message,t=e.isError;if(!n)return null;var c=t?"error":"success";return Object(r.jsx)("div",{className:"notification "+c,children:n})}),m=t(5),h=t.n(m),O={getAll:function(){return h.a.get("/api/persons")},create:function(e){return h.a.post("/api/persons",e)},delete:function(e){return h.a.delete("/api/person/"+e)},put:function(e,n){return h.a.put("/api/person/"+e,n)}},p=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],u=n[1],i=Object(c.useState)(""),o=Object(s.a)(i,2),d=o[0],m=o[1],h=Object(c.useState)(""),p=Object(s.a)(h,2),v=p[0],x=p[1],w=Object(c.useState)(""),g=Object(s.a)(w,2),N=g[0],S=g[1],y=Object(c.useState)(),C=Object(s.a)(y,2),D=C[0],E=C[1],k=function(e,n){E({message:e,isError:n}),setTimeout((function(){return E()}),3e3)};Object(c.useEffect)((function(){O.getAll().then((function(e){return u(e.data)}))}),[]);var A=function(){m(""),x("")};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(f,{message:null===D||void 0===D?void 0:D.message,isError:null===D||void 0===D?void 0:D.isError}),Object(r.jsx)(j,{search:N,setSearch:S}),Object(r.jsx)("h3",{children:"add a new"}),Object(r.jsx)(l,{onSubmit:function(e){e.preventDefault();var n,r=t.findIndex((function(e){return e.name===d}));r>=0?(n=r,window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))&&(u((function(e){var t=Object(a.a)(e);return t[n].number=v,t})),O.put(t[n].id,{name:d,number:v}).then((function(){return k("Updated ".concat(d))})).catch((function(){k("Information of ".concat(d," has already been removed from server"),!0),u((function(e){return e.filter((function(e,t){return t!==n}))}))})),A())):function(){var e=t[t.length-1].id+1;u((function(n){return[].concat(Object(a.a)(n),[{name:d,number:v,id:e}])})),O.create({name:d,number:v,id:e}).then((function(){return k("Added ".concat(d))})),A()}()},newNumber:v,newName:d,setNewNumber:x,setNewName:m}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(b,{persons:t,search:N,onDelete:function(e){u((function(n){return n.filter((function(n){return n.id!==e}))})),O.delete(e)}})]})};o.a.render(Object(r.jsx)(u.a.StrictMode,{children:Object(r.jsx)(p,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.a31c0d28.chunk.js.map